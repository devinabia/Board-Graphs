version: 1
# Backend configuration for Amplify Functions
backend:
  phases:
    build:
      commands:
        - npm ci --production
        - echo "Backend build completed"

# Frontend configuration
frontend:
  phases:
    preBuild:
      commands:
        - npm install
    build:
      commands:
        - echo "Building static site..."
        - mkdir -p public
        - cp -r assets public/ 2>/dev/null || echo "No assets directory"
        - cp *.html public/ 2>/dev/null || echo "No HTML files"
        - cp *.css public/ 2>/dev/null || echo "No CSS files"
        # Copy API handlers for serverless functions
        - mkdir -p public/api
        - cp api/*.js public/api/ 2>/dev/null || echo "No API files"
        - cp lib/*.js public/lib/ 2>/dev/null || echo "No lib files"
  artifacts:
    baseDirectory: public
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*


